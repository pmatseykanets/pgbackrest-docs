(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{160:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[s._m(0),a("p",[s._v("Monitoring is an important part of any production system. There are many tools available and pgBackRest can be monitored on any of them with a little work.")]),a("p",[s._v("pgBackRest can output information about the repository in JSON format which includes a list of all backups for each stanza and WAL archive info. A script is needed to extract information in a format that the monitoring system can understand.")]),s._m(1),s._m(2),s._m(3),s._m(4),s._m(5),s._m(6),s._m(7),a("p",[a("a",{attrs:{href:"https://stedolan.github.io/jq/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("jq")]),a("OutboundLink")],1),s._v(" is a command-line utility that can easily extract data from JSON.")]),s._m(8),s._m(9),s._m(10),a("p",[s._v("Or the last archived WAL.")]),s._m(11),s._m(12)])},[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"monitoring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monitoring","aria-hidden":"true"}},[this._v("#")]),this._v(" Monitoring")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Get pgBackRest info in JSON format")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres pgbackrest --output"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("json info\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{attrs:{class:"token string"}},[s._v('"archive"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"database"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"9.4-1"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"max"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000009"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"min"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000010000000000000002"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{attrs:{class:"token string"}},[s._v('"backup"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"archive"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000010000000000000002"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000010000000000000002"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"backrest"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"format"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 5,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"2.02"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"database"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"info"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 20162900,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"repository"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 2389280,\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 2389280\n                    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 20162900\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"label"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"prior"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" null,\n                "),a("span",{attrs:{class:"token string"}},[s._v('"reference"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" null,\n                "),a("span",{attrs:{class:"token string"}},[s._v('"timestamp"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619771,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619776\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"full"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"archive"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000010000000000000004"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000010000000000000004"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"backrest"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"format"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 5,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"2.02"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"database"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"info"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 8428,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"repository"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 400,\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 2389280\n                    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 20162900\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"label"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151616D"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"prior"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"reference"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"timestamp"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619776,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619780\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"diff"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"archive"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000006"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000006"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"backrest"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"format"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 5,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"2.02"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"database"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"info"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 24812,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"repository"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 544,\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 2389280\n                    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 20162900\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"label"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151632I"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"prior"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151616D"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"reference"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"timestamp"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619792,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619796\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"incr"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"archive"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000007"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000007"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"backrest"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"format"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 5,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"2.02"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"database"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"info"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 8428,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"repository"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 400,\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 2389280\n                    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 20162900\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"label"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151637I"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"prior"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151632I"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"reference"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151632I"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"timestamp"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619797,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619800\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"incr"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"archive"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000009"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000009"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"backrest"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"format"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 5,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"2.02"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"database"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"info"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 8428,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"repository"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"delta"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 400,\n                        "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 2389280\n                    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"size"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 20162900\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"label"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151645I"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"prior"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151637I"')]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"reference"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F"')]),s._v(",\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"20180506-151611F_20180506-151632I"')]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"timestamp"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619805,\n                    "),a("span",{attrs:{class:"token string"}},[s._v('"stop"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1525619810\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),a("span",{attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"incr"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{attrs:{class:"token string"}},[s._v('"db"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{attrs:{class:"token string"}},[s._v('"id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 1,\n                "),a("span",{attrs:{class:"token string"}},[s._v('"system-id"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 6552486958504244113,\n                "),a("span",{attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"9.4"')]),s._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{attrs:{class:"token string"}},[s._v('"name"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"demo"')]),s._v(",\n        "),a("span",{attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{attrs:{class:"token string"}},[s._v('"code"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" 0,\n            "),a("span",{attrs:{class:"token string"}},[s._v('"message"')]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"ok"')]),s._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"in-postgresql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#in-postgresql","aria-hidden":"true"}},[this._v("#")]),this._v(" In PostgreSQL")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("The PostgreSQL "),t("code",[this._v("COPY")]),this._v(" command allows pgBackRest info to be loaded into a table. The following example wraps that logic in a function that can be used to perform real-time queries.")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Load pgBackRest info function for PostgreSQL")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres "),a("span",{attrs:{class:"token function"}},[s._v("cat")]),s._v(" \\\n       /home/postgres/pgbackrest/doc/example/pgsql-pgbackrest-info.sql\n-- An example of monitoring pgBackRest from within PostgresSQL\n--\n-- Use copy to "),a("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" data from the pgBackRest info "),a("span",{attrs:{class:"token function"}},[s._v("command")]),s._v(" into the jsonb\n-- "),a("span",{attrs:{class:"token function"}},[s._v("type")]),s._v(" so it can be queried directly by PostgresSQL.\n\n-- Create monitor schema\ncreate schema monitor"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n-- Get pgBackRest info "),a("span",{attrs:{class:"token keyword"}},[s._v("in")]),s._v(" JSON "),a("span",{attrs:{class:"token function"}},[s._v("format")]),s._v("\ncreate "),a("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" monitor.pgbackrest_info"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    returns jsonb AS $$\n"),a("span",{attrs:{class:"token keyword"}},[s._v("declare")]),s._v("\n    data jsonb"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nbegin\n    -- Create a temp table to hold the JSON data\n    create temp table temp_pgbackrest_data "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data jsonb"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    -- Copy data into the table directory from the pgBackRest into "),a("span",{attrs:{class:"token function"}},[s._v("command")]),s._v("\n    copy temp_pgbackrest_data "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        from program\n            "),a("span",{attrs:{class:"token string"}},[s._v("'pgbackrest --output=json info | tr '")]),a("span",{attrs:{class:"token string"}},[s._v("'\\n'")]),a("span",{attrs:{class:"token string"}},[s._v("' '")]),a("span",{attrs:{class:"token string"}},[s._v("' '")]),a("span",{attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("format text"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" temp_pgbackrest_data.data\n      into data\n      from temp_pgbackrest_data"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    drop table temp_pgbackrest_data"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" data"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nend $$ language plpgsql"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres psql -f \\\n       /home/postgres/pgbackrest/doc/example/pgsql-pgbackrest-info.sql\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("Now the "),t("code",[this._v("monitor.pgbackrest_info()")]),this._v(" function can be used to determine the last successful backup time and archived WAL for a stanza.")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pg-primary ⇒ Query last successful backup "),a("span",{attrs:{class:"token function"}},[s._v("time")]),s._v(" and archived WAL\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres "),a("span",{attrs:{class:"token function"}},[s._v("cat")]),s._v(" \\\n       /home/postgres/pgbackrest/doc/example/pgsql-pgbackrest-query.sql\n-- Get last successful backup "),a("span",{attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each stanza\n--\n-- Requires the monitor.pgbackrest_info function.\nwith stanza as\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" data-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token string"}},[s._v("'name'")]),s._v(" as name,\n           data-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token string"}},[s._v("'backup'")]),s._v("-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n               jsonb_array_length"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token string"}},[s._v("'backup'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - 1"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as last_backup,\n           data-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token string"}},[s._v("'archive'")]),s._v("-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n               jsonb_array_length"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token string"}},[s._v("'archive'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - 1"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as current_archive\n      from jsonb_array_elements"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monitor.pgbackrest_info"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" as data\n"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name,\n       to_timestamp"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n           "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("last_backup-"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token string"}},[s._v("'timestamp'")]),s._v("-"),a("span",{attrs:{class:"token operator"}},[s._v(">>")]),a("span",{attrs:{class:"token string"}},[s._v("'stop'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("::numeric"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as last_successful_backup,\n       current_archive-"),a("span",{attrs:{class:"token operator"}},[s._v(">>")]),a("span",{attrs:{class:"token string"}},[s._v("'max'")]),s._v(" as last_archived_wal\n  from stanza"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres psql -f \\\n       /home/postgres/pgbackrest/doc/example/pgsql-pgbackrest-query.sql\n  name  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" last_successful_backup "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    last_archived_wal     \n--------+------------------------+--------------------------\n "),a("span",{attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" 2018-05-06 15:16:50+00 "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" 000000020000000000000009\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("1 row"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"using-jq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-jq","aria-hidden":"true"}},[this._v("#")]),this._v(" Using jq")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Install jq utility")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" jq\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("Now "),t("code",[this._v("jq")]),this._v(" can be used to query the last successful backup time for a stanza.")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Query last successful backup time")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres pgbackrest --output"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("json --stanza"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo info "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" \\\n       jq "),a("span",{attrs:{class:"token string"}},[s._v("'.[0] | .backup[-1] | .timestamp.stop'")]),s._v("\n1525619810\n")])])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Query last archived WAL")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres pgbackrest --output"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("json --stanza"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo info "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" \\\n       jq "),a("span",{attrs:{class:"token string"}},[s._v("'.[0] | .archive[-1] | .max'")]),s._v("\n"),a("span",{attrs:{class:"token string"}},[s._v('"000000020000000000000009"')]),s._v("\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("Note that this syntax requires "),t("code",[this._v("jq")]),this._v(" v1.5.")])}],!1,null,null,null);t.default=r.exports}}]);