(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{167:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"backup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#backup","aria-hidden":"true"}},[t._v("#")]),t._v(" Backup")]),s("h2",{attrs:{id:"fast-start-option"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fast-start-option","aria-hidden":"true"}},[t._v("#")]),t._v(" Fast Start Option")]),s("p",[t._v("By default pgBackRest will wait for the next regularly scheduled checkpoint before starting a backup. Depending on the checkpoint_timeout and checkpoint_segments settings in PostgreSQL it may be quite some time before a checkpoint completes and the backup can begin.")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# pg-primary ⇒ Incremental backup of the demo cluster with the regularly scheduled checkpoint")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u postgres pgbackrest --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr \\\n       --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info backup\nP00   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" begin 2.02: --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info --log-level-stderr"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("off --no-log-timestamp --pg1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/postgresql/9.4/demo --repo1-cipher-pass"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" --repo1-cipher-type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("aes-256-cbc --repo1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/pgbackrest --repo1-retention-full"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("2 --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr\nP00   INFO: last backup label "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 20180506-151611F_20180506-151616D, version "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 2.02\nP00   INFO: execute exclusive pg_start_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" with label "),s("span",{attrs:{class:"token string"}},[t._v('"pgBackRest backup started at 2018-05-06 15:16:32"')]),s("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" backup begins after the next regular checkpoint completes\nP00   INFO: backup start archive "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 000000020000000000000006, lsn "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0/6000028\nP01   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" /var/lib/postgresql/9.4/demo/pg_multixact/offsets/0000 "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("8KB, 33%"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" checksum 0631457264ff7f8d5fb1edc2c0211992a67c73e6\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filtered 10 lines of output"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("When "),s("code",[t._v("--start-fast")]),t._v(" is passed on the command-line or start-fast=y is set in "),s("code",[t._v("/etc/pgbackrest/pgbackrest.conf")]),t._v(" an immediate checkpoint is requested and the backup will start more quickly. This is convenient for testing and for ad-hoc backups. For instance, if a backup is being taken at the beginning of a release window it makes no sense to wait for a checkpoint. Since regularly scheduled backups generally only happen once per day it is unlikely that enabling the start-fast in "),s("code",[t._v("/etc/pgbackrest/pgbackrest.conf")]),t._v(" will negatively affect performance, however for high-volume transactional systems you may want to pass --start-fast on the command-line instead. Alternately, it is possible to override the setting in the configuration file by passing --no-start-fast on the command-line.")]),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[t._v("# pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Enable the start-fast option\n"),s("span",{attrs:{class:"token selector"}},[t._v("[demo]")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("pg1-path")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("/var/lib/postgresql/9.4/demo")]),t._v("\n\n"),s("span",{attrs:{class:"token selector"}},[t._v("[global]")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-cipher-pass")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-cipher-type")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("aes-256-cbc")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-path")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("/var/lib/pgbackrest")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-retention-full")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("2")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("start-fast")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("y")]),t._v("\n\n"),s("span",{attrs:{class:"token selector"}},[t._v("[global:archive-push]")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("compress-level")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("3")]),t._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# pg-primary ⇒ Incremental backup of the demo cluster with an immediate checkpoint")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u postgres pgbackrest --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr \\\n       --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info backup\nP00   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" begin 2.02: --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info --log-level-stderr"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("off --no-log-timestamp --pg1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/postgresql/9.4/demo --repo1-cipher-pass"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" --repo1-cipher-type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("aes-256-cbc --repo1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/pgbackrest --repo1-retention-full"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("2 --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --start-fast --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr\nP00   INFO: last backup label "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 20180506-151611F_20180506-151632I, version "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 2.02\nP00   INFO: execute exclusive pg_start_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" with label "),s("span",{attrs:{class:"token string"}},[t._v('"pgBackRest backup started at 2018-05-06 15:16:37"')]),s("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" backup begins after the requested immediate checkpoint completes\nP00   INFO: backup start archive "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 000000020000000000000007, lsn "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0/7000028\nP01   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" /var/lib/postgresql/9.4/demo/global/pg_control "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("8KB, 97%"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" checksum 8500029d8dec8b2403e77a7c8946db1e4a896834\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filtered 8 lines of output"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"automatic-stop-option"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#automatic-stop-option","aria-hidden":"true"}},[t._v("#")]),t._v(" Automatic Stop Option")]),s("p",[t._v("Sometimes pgBackRest will exit unexpectedly and the backup in progress on the PostgreSQL cluster will not be properly stopped. pgBackRest exits as quickly as possible when an error occurs so that the cause can be reported accurately and is not masked by another problem that might happen during a more extensive cleanup.")]),s("p",[t._v("Here an error is intentionally caused by removing repository permissions.")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# pg-primary ⇒ Revoke write privileges in the pgBackRest repository and attempt a backup")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 550 /var/lib/pgbackrest/backup/demo/\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u postgres pgbackrest --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr \\\n       --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info backup\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filtered 2 lines of output"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nP00   INFO: execute exclusive pg_start_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" with label "),s("span",{attrs:{class:"token string"}},[t._v('"pgBackRest backup started at 2018-05-06 15:16:41"')]),s("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" backup begins after the requested immediate checkpoint completes\nP00   INFO: backup start archive "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 000000020000000000000008, lsn "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0/8000028\nP00  ERROR: "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("047"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": unable to create path "),s("span",{attrs:{class:"token string"}},[t._v("'/var/lib/pgbackrest/backup/demo/20180506-151611F_20180506-151641I'")]),s("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" Permission denied\nP00   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" end: aborted with exception "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("047"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Even when the permissions are fixed pgBackRest will still be unable to perform a backup because the PostgreSQL cluster is stuck in backup mode.")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# pg-primary ⇒ Restore write privileges in the pgBackRest repository and attempt a backup")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 750 /var/lib/pgbackrest/backup/demo/\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u postgres pgbackrest --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr \\\n       --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info backup\nP00   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" begin 2.02: --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info --log-level-stderr"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("off --no-log-timestamp --pg1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/postgresql/9.4/demo --repo1-cipher-pass"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" --repo1-cipher-type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("aes-256-cbc --repo1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/pgbackrest --repo1-retention-full"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("2 --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --start-fast --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr\nP00   INFO: last backup label "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 20180506-151611F_20180506-151637I, version "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 2.02\nP00   INFO: execute exclusive pg_start_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" with label "),s("span",{attrs:{class:"token string"}},[t._v('"pgBackRest backup started at 2018-05-06 15:16:43"')]),s("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" backup begins after the requested immediate checkpoint completes\nP00  ERROR: "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("057"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": ERROR:  a backup is already "),s("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" progress\n            HINT:  Run pg_stop_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" and try again.:\n            "),s("span",{attrs:{class:"token keyword"}},[t._v("select")]),t._v(" to_char"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current_timestamp, "),s("span",{attrs:{class:"token string"}},[t._v("'YYYY-MM-DD HH24:MI:SS.US TZ'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", pg_xlogfile_name"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lsn"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", lsn::text from pg_start_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'pgBackRest backup started at 2018-05-06 15:16:43'")]),t._v(", true"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" as lsn\n")])])]),s("p",[t._v("Enabling the "),s("code",[t._v("stop-auto")]),t._v(" option allows pgBackRest to stop the current backup if it detects that no other pgBackRest backup process is running.")]),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[t._v("# pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Enable the stop-auto option\n"),s("span",{attrs:{class:"token selector"}},[t._v("[demo]")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("pg1-path")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("/var/lib/postgresql/9.4/demo")]),t._v("\n\n"),s("span",{attrs:{class:"token selector"}},[t._v("[global]")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-cipher-pass")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-cipher-type")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("aes-256-cbc")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-path")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("/var/lib/pgbackrest")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("repo1-retention-full")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("2")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("start-fast")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("y")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("stop-auto")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("y")]),t._v("\n\n"),s("span",{attrs:{class:"token selector"}},[t._v("[global:archive-push]")]),t._v("\n"),s("span",{attrs:{class:"token constant"}},[t._v("compress-level")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("3")]),t._v("\n")])])]),s("p",[t._v("Now pgBackRest will stop the old backup and start a new one so the process completes successfully.")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# pg-primary ⇒ Perform an incremental backup")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u postgres pgbackrest --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr \\\n       --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info backup\nP00   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" begin 2.02: --log-level-console"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("info --log-level-stderr"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("off --no-log-timestamp --pg1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/postgresql/9.4/demo --repo1-cipher-pass"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" --repo1-cipher-type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("aes-256-cbc --repo1-path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/pgbackrest --repo1-retention-full"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("2 --stanza"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("demo --start-fast --stop-auto --type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("incr\nP00   INFO: last backup label "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 20180506-151611F_20180506-151637I, version "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 2.02\nP00   WARN: the cluster is already "),s("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" backup mode but no pgBackRest backup process is running. pg_stop_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" will be called so a new backup can be started.\nP00   INFO: execute exclusive pg_stop_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" and "),s("span",{attrs:{class:"token function"}},[t._v("wait")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" all WAL segments to archive\nP00   INFO: execute exclusive pg_start_backup"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" with label "),s("span",{attrs:{class:"token string"}},[t._v('"pgBackRest backup started at 2018-05-06 15:16:45"')]),s("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" backup begins after the requested immediate checkpoint completes\nP00   INFO: backup start archive "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 000000020000000000000009, lsn "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0/9000028\nP01   INFO: backup "),s("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" /var/lib/postgresql/9.4/demo/global/pg_control "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("8KB, 97%"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" checksum 725279f91ec80c37072f7c1cb71fd27c36e9f0b8\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filtered 8 lines of output"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Although useful this feature may not be appropriate when another third-party backup solution is being used to take online backups as pgBackRest will not recognize that the other software is running and may terminate a backup started by that software. However, it would be unusual to run more than one third-party backup solution at the same time so this is not likely to be a problem.")]),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),s("p",[s("code",[t._v("pg_dump")]),t._v(" and "),s("code",[t._v("pg_basebackup")]),t._v(" do not take online backups so are not affected. It is safe to run them in conjunction with pgBackRest.")])]),s("h2",{attrs:{id:"archive-timeout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#archive-timeout","aria-hidden":"true"}},[t._v("#")]),t._v(" Archive Timeout")]),s("p",[t._v("During an online backup pgBackRest waits for WAL segments that are required for backup consistency to be archived. This wait time is governed by the pgBackRest "),s("code",[t._v("archive-timeout")]),t._v(" option which defaults to 60 seconds. If archiving an individual segment is known to take longer then this option should be increased.")])])}],!1,null,null,null);a.default=n.exports}}]);