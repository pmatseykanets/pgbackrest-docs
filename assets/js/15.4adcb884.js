(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{185:function(e,t,a){"use strict";a.r(t);var s=a(0),r=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e._m(0),a("p",[e._v("This command is generally run manually, but there are instances where it might be automated.")]),e._m(1),a("p",[e._v("Restore only specified databases.")]),a("p",[e._v("This feature allows only selected databases to be restored. Databases not specifically included will be restored as sparse, zeroed files to save space but still allow PostgreSQL to perform recovery. After recovery the databases that were not included will not be accessible but can be removed with the drop database command.")]),e._m(2),e._m(3),e._m(4),e._m(5),a("p",[e._v("Restore using delta.")]),a("p",[e._v("By default the PostgreSQL data and tablespace directories are expected to be present but empty. This option performs a delta restore using checksums.")]),e._m(6),e._m(7),a("p",[e._v("Force a restore.")]),e._m(8),e._m(9),e._m(10),a("p",[e._v("Restore all symlinks.")]),a("p",[e._v("By default symlinked directories and files are restored as normal directories and files in $PGDATA. This is because it may not be safe to restore symlinks to their original destinations on a system other than where the original backup was performed. This option restores all the symlinks just as they were on the original system where the backup was performed.")]),e._m(11),e._m(12),a("p",[e._v("Modify the destination of a symlink.")]),a("p",[e._v("Allows the destination file or path of a symlink to be changed on restore. This is useful for restoring to systems that have a different storage layout than the original system where the backup was generated.")]),e._m(13),e._m(14),e._m(15),e._m(16),e._m(17),e._m(18),e._m(19),e._m(20),a("p",[e._v("Backup set to restore.")]),a("p",[e._v("The backup set to be restored. latest will restore the latest backup, otherwise provide the name of the backup to restore.")]),e._m(21),e._m(22),a("p",[e._v("Restore a tablespace into the specified directory.")]),a("p",[e._v("Moves a tablespace to a new location during the restore. This is useful when tablespace locations are not the same on a replica, or an upgraded system has different mount points.")]),a("p",[e._v("Since PostgreSQL 9.2 tablespace locations are not stored in "),a("code",[e._v("pg_tablespace")]),e._v(" so moving tablespaces can be done with impunity. However, moving a tablespace to the data_directory is not recommended and may cause problems. For more information on moving tablespaces "),a("a",{attrs:{href:"http://www.databasesoup.com/2013/11/moving-tablespaces.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.databasesoup.com/2013/11/moving-tablespaces.html"),a("OutboundLink")],1),e._v(" is a good resource.")]),e._m(23),e._m(24),a("p",[e._v("Restore all tablespaces into the specified directory.")]),a("p",[e._v("By default tablespaces are restored into their original locations and while this behavior can be modified by with the tablespace-map open it is sometime preferable to remap all tablespaces to a new directory all at once. This is particularly useful for development or staging systems that may not have the same storage layout as the original system where the backup was generated.")]),a("p",[e._v("The path specified will be the parent path used to create all the tablespaces in the backup.")]),e._m(25),e._m(26),a("p",[e._v("Recovery target.")]),e._m(27),e._m(28),e._m(29),a("p",[e._v("Action to take when recovery target is reached.")]),a("p",[e._v("The following actions are supported:")]),e._m(30),a("p",[e._v("This option is only supported on PostgreSQL >= 9.5.")]),e._m(31),e._m(32),a("p",[e._v("Stop just before the recovery target is reached.")]),a("p",[e._v("Defines whether recovery to the target would be exclusive (the default is inclusive) and is only valid when "),a("code",[e._v("--type")]),e._v(" is time or xid. For example, using "),a("code",[e._v("--target-exclusive")]),e._v(" would exclude the contents of transaction "),a("code",[e._v("1007")]),e._v(" when "),a("code",[e._v("--type=xid")]),e._v(" and "),a("code",[e._v("--target=1007")]),e._v(". See the "),a("code",[e._v("recovery_target_inclusive")]),e._v(" option in the "),a("a",{attrs:{href:"https://www.postgresql.org/docs/current/static/recovery-target-settings.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostgreSQL docs"),a("OutboundLink")],1),e._v(" for more information.")]),e._m(33),e._m(34),a("p",[e._v("Recover along a timeline.")]),a("p",[e._v("See "),a("code",[e._v("recovery_target_timeline")]),e._v(" in the "),a("a",{attrs:{href:"https://www.postgresql.org/docs/current/static/recovery-target-settings.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostgreSQL docs"),a("OutboundLink")],1),e._v(" for more information.")]),e._m(35),e._m(36),a("p",[e._v("Recovery type.")]),a("p",[e._v("The following recovery types are supported:")]),e._m(37),e._m(38)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"restore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#restore","aria-hidden":"true"}},[this._v("#")]),this._v(" restore")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"db-include"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#db-include","aria-hidden":"true"}},[this._v("#")]),this._v(" --db-include")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE:")]),a("p",[e._v("Note that built-in databases ("),a("code",[e._v("template0")]),e._v(", "),a("code",[e._v("template1")]),e._v(", and "),a("code",[e._v("postgres")]),e._v(") are always restored.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("code",[this._v("--db-include")]),this._v(" option can be passed multiple times to specify more than one database to include.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --db-include=db_main\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"delta"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delta","aria-hidden":"true"}},[this._v("#")]),this._v(" --delta")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: n\nexample: --delta\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"force"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#force","aria-hidden":"true"}},[this._v("#")]),this._v(" --force")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("By itself this option forces the PostgreSQL data and tablespace paths to be completely overwritten. In combination with "),t("code",[this._v("--delta")]),this._v(" a timestamp/size delta will be performed instead of using checksums.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: n\nexample: --force\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"link-all"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#link-all","aria-hidden":"true"}},[this._v("#")]),this._v(" --link-all")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: n\nexample: --link-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"link-map"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#link-map","aria-hidden":"true"}},[this._v("#")]),this._v(" --link-map")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --link-map=pg_xlog=/data/xlog\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"recovery-option"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#recovery-option","aria-hidden":"true"}},[this._v("#")]),this._v(" --recovery-option")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Set an option in "),t("code",[this._v("recovery.conf")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("See "),t("code",[this._v("http://www.postgresql.org/docs/X.X/static/recovery-config.html")]),this._v(" for details on recovery.conf options (replace "),t("code",[this._v("X.X")]),this._v(" with your PostgreSQL version). This option can be used multiple times.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE:")]),a("p",[e._v("The restore_command option will be automatically generated but can be overridden with this option. Be careful about specifying your own "),a("code",[e._v("restore_command")]),e._v(" as pgBackRest is designed to handle this for you. Target Recovery options ("),a("code",[e._v("recovery_target_name")]),e._v(", "),a("code",[e._v("recovery_target_time")]),e._v(", etc.) are generated automatically by pgBackRest and should not be set with this option.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Since pgBackRest does not start PostgreSQL after writing the "),t("code",[this._v("recovery.conf")]),this._v(" file, it is always possible to edit/check "),t("code",[this._v("recovery.conf")]),this._v(" before manually restarting.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --recovery-option=primary_conninfo=db.mydomain.com\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set","aria-hidden":"true"}},[this._v("#")]),this._v(" --set")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: latest\nexample: --set=20150131-153358F_20150131-153401I\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"tablespace-map"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tablespace-map","aria-hidden":"true"}},[this._v("#")]),this._v(" --tablespace-map")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --tablespace-map=ts_01=/db/ts_01\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"tablespace-map-all"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tablespace-map-all","aria-hidden":"true"}},[this._v("#")]),this._v(" --tablespace-map-all")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --tablespace-map-all=/data/tablespace\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"target"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#target","aria-hidden":"true"}},[this._v("#")]),this._v(" --target")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Defines the recovery target when "),t("code",[this._v("--type")]),this._v(" is name, xid, or time.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --target=2015-01-30 14:15:11 EST\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"target-action"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#target-action","aria-hidden":"true"}},[this._v("#")]),this._v(" --target-action")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("code",[this._v("pause")]),this._v(" - pause when recovery target is reached.")]),t("li",[t("code",[this._v("promote")]),this._v(" - promote and switch timeline when recovery target is reached.")]),t("li",[t("code",[this._v("shutdown")]),this._v(" - shutdown server when recovery target is reached.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: pause\nexample: --target-action=promote\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"target-exclusive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#target-exclusive","aria-hidden":"true"}},[this._v("#")]),this._v(" --target-exclusive")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: n\nexample: --no-target-exclusive\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"target-timeline"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#target-timeline","aria-hidden":"true"}},[this._v("#")]),this._v(" --target-timeline")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("example: --target-timeline=3\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#type","aria-hidden":"true"}},[this._v("#")]),this._v(" --type")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("code",[e._v("default")]),e._v(" - recover to the end of the archive stream.")]),a("li",[a("code",[e._v("immediate")]),e._v(" - recover only until the database becomes consistent. This option is only supported on PostgreSQL >= 9.4.")]),a("li",[a("code",[e._v("name")]),e._v(" - recover the restore point specified in "),a("code",[e._v("--target")]),e._v(".")]),a("li",[a("code",[e._v("xid")]),e._v(" - recover to the transaction id specified in "),a("code",[e._v("--target")]),e._v(".")]),a("li",[a("code",[e._v("time")]),e._v(" - recover to the time specified in "),a("code",[e._v("--target")]),e._v(".")]),a("li",[a("code",[e._v("preserve")]),e._v(" - preserve the existing "),a("code",[e._v("recovery.conf")]),e._v(" file.")]),a("li",[a("code",[e._v("none")]),e._v(" - no "),a("code",[e._v("recovery.conf")]),e._v(" file is written so PostgreSQL will attempt to achieve consistency using WAL segments present in "),a("code",[e._v("pg_xlog/pg_wal")]),e._v(". Provide the required WAL segments or use the "),a("code",[e._v("archive-copy")]),e._v(" setting to include them with the backup.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("default: default\nexample: --type=xid\n")])])])}],!1,null,null,null);t.default=r.exports}}]);