(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{163:function(s,t,a){"use strict";a.r(t);var e=a(0),o=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"deleting-a-stanza"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deleting-a-stanza","aria-hidden":"true"}},[s._v("#")]),s._v(" Deleting a Stanza")]),a("p",[s._v("The "),a("code",[s._v("stanza-delete")]),s._v(" command removes data in the repository associated with a stanza. Use this command with caution — it will permanently remove all backups and archives from the pgBackRest repository for the specified stanza.")]),a("p",[s._v("To delete a stanza:")]),a("ul",[a("li",[s._v("Shut down the PostgreSQL cluster associated with the stanza (or use "),a("code",[s._v("--force")]),s._v(" to override).")]),a("li",[s._v("Run the stop command on the repository host.")]),a("li",[s._v("Run the stanza-delete command on the repository host.")])]),a("p",[s._v("Once the command successfully completes, it is the responsibility of the user to remove the stanza from all pgBackRest configuration files.")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Stop PostgreSQL cluster to be removed")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pg_ctlcluster 9.4 demo stop\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Stop pgBackRest for the stanza")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres pgbackrest --stanza"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo --log-level-console"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("info stop\nP00   INFO: stop "),a("span",{attrs:{class:"token function"}},[s._v("command")]),s._v(" begin 2.02: --log-level-console"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("info --log-level-stderr"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("off --no-log-timestamp --repo1-cipher-type"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("none --repo1-path"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/ --repo1-s3-bucket"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo-bucket --repo1-s3-endpoint"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("s3.amazonaws.com --repo1-s3-key"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" --repo1-s3-key-secret"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" --repo1-s3-region"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("us-east-1 --no-repo1-s3-verify-ssl --repo1-type"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("s3 --stanza"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo\nP00   INFO: stop "),a("span",{attrs:{class:"token function"}},[s._v("command")]),s._v(" end: completed successfully\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# pg-primary ⇒ Delete the stanza")]),s._v("\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -u postgres pgbackrest --stanza"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo --log-level-console"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("info stanza-delete\nP00   INFO: stanza-delete "),a("span",{attrs:{class:"token function"}},[s._v("command")]),s._v(" begin 2.02: --log-level-console"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("info --log-level-stderr"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("off --no-log-timestamp --pg1-path"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/postgresql/9.4/demo --repo1-cipher-type"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("none --repo1-path"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/ --repo1-s3-bucket"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo-bucket --repo1-s3-endpoint"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("s3.amazonaws.com --repo1-s3-key"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" --repo1-s3-key-secret"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" --repo1-s3-region"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("us-east-1 --no-repo1-s3-verify-ssl --repo1-type"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("s3 --stanza"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("demo\nP00   INFO: stanza-delete "),a("span",{attrs:{class:"token function"}},[s._v("command")]),s._v(" end: completed successfully\n")])])])])}],!1,null,null,null);t.default=o.exports}}]);