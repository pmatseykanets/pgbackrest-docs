<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Retention | pgBackRest</title>
    <meta name="description" content="Reliable PostgreSQL Backup &amp; Restore">
    <link rel="icon" href="/pgbackrest-docs/logo.png">
    
    <link rel="preload" href="/pgbackrest-docs/assets/css/0.styles.18edf712.css" as="style"><link rel="preload" href="/pgbackrest-docs/assets/js/app.01ebea85.js" as="script"><link rel="preload" href="/pgbackrest-docs/assets/js/46.0d093936.js" as="script"><link rel="prefetch" href="/pgbackrest-docs/assets/js/26.e11cc072.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/2.ea010887.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/3.b7507089.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/4.cfc39c6d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/5.6b11616c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/6.df92328a.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/7.58324044.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/8.c87957ea.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/9.0fb232f6.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/10.972bbafb.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/11.e78eb127.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/12.5928bd53.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/13.1c12197c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/14.d84f628c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/15.4adcb884.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/16.ef3b7049.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/17.9d3117d9.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/18.0bcae378.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/19.295fa193.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/20.94847527.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/21.b5e7b8b5.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/22.d07ad4dd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/23.77d36072.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/24.6b6691b4.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/25.f9425e67.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/27.78d9feea.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/28.1f99e16d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/29.28bb7045.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/30.cff46cbe.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/31.47660e90.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/32.9df22cac.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/33.37935b34.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/34.9706bcdc.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/35.5ec6e936.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/36.996e8c9b.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/37.4718e56d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/38.b3445822.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/39.c3ad3059.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/40.567d1aff.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/41.d0b20dd8.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/42.663bd5fd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/43.d28dcd20.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/44.2dd273bd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/45.bf622f74.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/47.4a1a0f05.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/48.808678bd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/49.18e9d1eb.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/50.fa7ae22a.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/51.63339b12.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/52.8b737e70.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/53.974f5c76.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/54.9d3ce5c2.js">
    <link rel="stylesheet" href="/pgbackrest-docs/assets/css/0.styles.18edf712.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/pgbackrest-docs/" class="home-link router-link-active"><!----><span class="site-name">
      pgBackRest
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/pgbackrest-docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/pgbackrest-docs/releases/" class="nav-link">Releases</a></div><div class="nav-item"><a href="/pgbackrest-docs/config/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/pgbackrest-docs/commands/" class="nav-link">Commands</a></div><a href="https://github.com/pgbackrest/pgbackrest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/pgbackrest-docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/pgbackrest-docs/releases/" class="nav-link">Releases</a></div><div class="nav-item"><a href="/pgbackrest-docs/config/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/pgbackrest-docs/commands/" class="nav-link">Commands</a></div><a href="https://github.com/pgbackrest/pgbackrest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span><!----></p><ul class="sidebar-group-items"><li><a href="/pgbackrest-docs/guide/" class="sidebar-link">Introduction</a></li><li><a href="/pgbackrest-docs/guide/features.html" class="sidebar-link">Features</a></li><li><a href="/pgbackrest-docs/guide/concepts.html" class="sidebar-link">Concepts</a></li><li><a href="/pgbackrest-docs/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/pgbackrest-docs/guide/quick_start.html" class="sidebar-link">Quick Start</a></li><li><a href="/pgbackrest-docs/guide/backup.html" class="sidebar-link">Backup</a></li><li><a href="/pgbackrest-docs/guide/monitoring.html" class="sidebar-link">Monitoring</a></li><li><a href="/pgbackrest-docs/guide/retention.html" class="active sidebar-link">Retention</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/retention.html#full-backup-retention" class="sidebar-link">Full Backup Retention</a></li><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/retention.html#differential-backup-retention" class="sidebar-link">Differential Backup Retention</a></li><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/retention.html#archive-retention" class="sidebar-link">Archive Retention</a></li></ul></li><li><a href="/pgbackrest-docs/guide/restore.html" class="sidebar-link">Restore</a></li><li><a href="/pgbackrest-docs/guide/point_in_time_recovery.html" class="sidebar-link">Point In Time Recovery</a></li><li><a href="/pgbackrest-docs/guide/s3_support.html" class="sidebar-link">AWS S3 Support</a></li><li><a href="/pgbackrest-docs/guide/deleting_stanza.html" class="sidebar-link">Deleting a Stanza</a></li><li><a href="/pgbackrest-docs/guide/dedicated_repository_host.html" class="sidebar-link">Dedicated Repository Host</a></li><li><a href="/pgbackrest-docs/guide/parallel_backup_restore.html" class="sidebar-link">Parallel Backup / Restore</a></li><li><a href="/pgbackrest-docs/guide/starting_and_stopping.html" class="sidebar-link">Starting And Stopping</a></li><li><a href="/pgbackrest-docs/guide/replication.html" class="sidebar-link">Replication</a></li><li><a href="/pgbackrest-docs/guide/asynchronous_archiving.html" class="sidebar-link">Asynchronous Archiving</a></li><li><a href="/pgbackrest-docs/guide/backup_from_standby.html" class="sidebar-link">Backup From a Standby</a></li><li><a href="/pgbackrest-docs/guide/upgrading_postgresql.html" class="sidebar-link">Upgrading PostgreSQL</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="retention"><a href="#retention" aria-hidden="true" class="header-anchor">#</a> Retention</h1><p>Generally it is best to retain as many backups as possible to provide a greater window for Point-in-Time Recovery, but practical concerns such as disk space must also be considered. Retention options remove older backups once they are no longer needed.</p><h2 id="full-backup-retention"><a href="#full-backup-retention" aria-hidden="true" class="header-anchor">#</a> Full Backup Retention</h2><p>Set <code>repo1-retention-full</code> to the number of full backups required. New backups must be completed before expiration will occur — that means if repo1-retention-full=2 then there will be three full backups stored before the oldest one is expired.</p><div class="language-ini extra-class"><pre class="language-ini"><code># pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Configure repo1-retention-full
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>

<span class="token selector">[global]</span>
<span class="token constant">repo1-cipher-pass</span><span class="token attr-value"><span class="token punctuation">=</span>zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</span>
<span class="token constant">repo1-cipher-type</span><span class="token attr-value"><span class="token punctuation">=</span>aes-256-cbc</span>
<span class="token constant">repo1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/pgbackrest</span>
<span class="token constant">repo1-retention-full</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">start-fast</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>
<span class="token constant">stop-auto</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">compress-level</span><span class="token attr-value"><span class="token punctuation">=</span>3</span>
</code></pre></div><p>Backup <code>repo1-retention-full=2</code> but currently there is only one full backup so the next full backup to run will not expire any full backups.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Perform a full backup</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>full \
       --log-level-console<span class="token operator">=</span>detail backup
       <span class="token punctuation">[</span>filtered 763 lines of output<span class="token punctuation">]</span>
P00   INFO: backup <span class="token function">command</span> end: completed successfully
P00   INFO: expire <span class="token function">command</span> begin
P00 DETAIL: archive retention on backup 20180506-151611F, archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 000000010000000000000002
P00 DETAIL: no archive to remove, archiveId <span class="token operator">=</span> 9.4-1
P00   INFO: expire <span class="token function">command</span> end: completed successfully
</code></pre></div><p>Archive is expired because WAL segments were generated before the oldest backup. These are not useful for recovery — only WAL segments generated after a backup can be used to recover that backup.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Perform a full backup</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>full \
       --log-level-console<span class="token operator">=</span>info backup
       <span class="token punctuation">[</span>filtered 763 lines of output<span class="token punctuation">]</span>
P00   INFO: backup <span class="token function">command</span> end: completed successfully
P00   INFO: expire <span class="token function">command</span> begin
P00   INFO: expire full backup set: 20180506-151611F, 20180506-151611F_20180506-151616D, 20180506-151611F_20180506-151632I, 20180506-151611F_20180506-151637I, 20180506-151611F_20180506-151645I
P00   INFO: remove expired backup 20180506-151611F_20180506-151645I
P00   INFO: remove expired backup 20180506-151611F_20180506-151637I
       <span class="token punctuation">[</span>filtered 3 lines of output<span class="token punctuation">]</span>
</code></pre></div><p>The <code>20180506-151611F</code> full backup is expired and archive retention is based on the <code>20180506-151655F</code> which is now the oldest full backup.</p><h2 id="differential-backup-retention"><a href="#differential-backup-retention" aria-hidden="true" class="header-anchor">#</a> Differential Backup Retention</h2><p>Set <code>repo1-retention-diff</code> to the number of differential backups required. Differentials only rely on the prior full backup so it is possible to create a rolling set of differentials for the last day or more. This allows quick restores to recent points-in-time but reduces overall space consumption.</p><div class="language-ini extra-class"><pre class="language-ini"><code># pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Configure repo1-retention-diff
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>

<span class="token selector">[global]</span>
<span class="token constant">repo1-cipher-pass</span><span class="token attr-value"><span class="token punctuation">=</span>zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</span>
<span class="token constant">repo1-cipher-type</span><span class="token attr-value"><span class="token punctuation">=</span>aes-256-cbc</span>
<span class="token constant">repo1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/pgbackrest</span>
<span class="token constant">repo1-retention-diff</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">repo1-retention-full</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">start-fast</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>
<span class="token constant">stop-auto</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">compress-level</span><span class="token attr-value"><span class="token punctuation">=</span>3</span>
</code></pre></div><p>Backup <code>repo1-retention-diff=1</code> so two differentials will need to be performed before one is expired. An incremental backup is added to demonstrate incremental expiration. Incremental backups cannot be expired independently — they are always expired with their related full or differential backup.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Perform differential and incremental backups</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>diff backup
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr backup
</code></pre></div><p>Now performing a differential backup will expire the previous differential and incremental backups leaving only one differential backup.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Perform a differential backup</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>diff \
       --log-level-console<span class="token operator">=</span>info backup
       <span class="token punctuation">[</span>filtered 10 lines of output<span class="token punctuation">]</span>
P00   INFO: backup <span class="token function">command</span> end: completed successfully
P00   INFO: expire <span class="token function">command</span> begin
P00   INFO: expire <span class="token function">diff</span> backup set: 20180506-151702F_20180506-151709D, 20180506-151702F_20180506-151714I
P00   INFO: remove expired backup 20180506-151702F_20180506-151714I
P00   INFO: remove expired backup 20180506-151702F_20180506-151709D
</code></pre></div><h2 id="archive-retention"><a href="#archive-retention" aria-hidden="true" class="header-anchor">#</a> Archive Retention</h2><p>Although pgBackRest automatically removes archived WAL segments when expiring backups (the default expires WAL for full backups based on the repo1-retention-full option), it may be useful to expire archive more aggressively to save disk space. Note that full backups are treated as differential backups for the purpose of differential archive retention.</p><p>Expiring archive will never remove WAL segments that are required to make a backup consistent. However, since Point-in-Time-Recovery (PITR) only works on a continuous WAL stream, care should be taken when aggressively expiring archive outside of the normal backup expiration process.</p><div class="language-ini extra-class"><pre class="language-ini"><code># pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Configure repo1-retention-diff
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>

<span class="token selector">[global]</span>
<span class="token constant">repo1-cipher-pass</span><span class="token attr-value"><span class="token punctuation">=</span>zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</span>
<span class="token constant">repo1-cipher-type</span><span class="token attr-value"><span class="token punctuation">=</span>aes-256-cbc</span>
<span class="token constant">repo1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/pgbackrest</span>
<span class="token constant">repo1-retention-diff</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">repo1-retention-full</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">start-fast</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>
<span class="token constant">stop-auto</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">compress-level</span><span class="token attr-value"><span class="token punctuation">=</span>3</span>
</code></pre></div><div class="language-bash extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Perform differential backup</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>diff \
       --log-level-console<span class="token operator">=</span>info backup
       <span class="token punctuation">[</span>filtered 7 lines of output<span class="token punctuation">]</span>
P00   INFO: execute exclusive pg_stop_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> and <span class="token function">wait</span> <span class="token keyword">for</span> all WAL segments to archive
P00   INFO: backup stop archive <span class="token operator">=</span> 000000020000000000000014, lsn <span class="token operator">=</span> 0/140000F0
P00   INFO: new backup label <span class="token operator">=</span> 20180506-151702F_20180506-151724D
P00   INFO: backup <span class="token function">command</span> end: completed successfully
P00   INFO: expire <span class="token function">command</span> begin
</code></pre></div><div class="language-bash extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Expire archive</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --log-level-console<span class="token operator">=</span>detail \
       --repo1-retention-archive-type<span class="token operator">=</span>diff --repo1-retention-archive<span class="token operator">=</span>1 expire
P00   INFO: expire <span class="token function">command</span> begin 2.02: --log-level-console<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --repo1-cipher-pass<span class="token operator">=</span> --repo1-cipher-type<span class="token operator">=</span>aes-256-cbc --repo1-path<span class="token operator">=</span>/var/lib/pgbackrest --repo1-retention-archive<span class="token operator">=</span>1 --repo1-retention-archive-type<span class="token operator">=</span>diff --repo1-retention-diff<span class="token operator">=</span>2 --repo1-retention-full<span class="token operator">=</span>2 --stanza<span class="token operator">=</span>demo
P00 DETAIL: archive retention on backup 20180506-151655F, archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 00000002000000000000000B, stop <span class="token operator">=</span> 00000002000000000000000B
P00 DETAIL: archive retention on backup 20180506-151702F, archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 00000002000000000000000C, stop <span class="token operator">=</span> 00000002000000000000000C
P00 DETAIL: archive retention on backup 20180506-151702F_20180506-151718D, archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 000000020000000000000010, stop <span class="token operator">=</span> 000000020000000000000010
P00 DETAIL: archive retention on backup 20180506-151702F_20180506-151724D, archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 000000020000000000000014
P00 DETAIL: remove archive: archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 00000002000000000000000D, stop <span class="token operator">=</span> 00000002000000000000000F
P00 DETAIL: remove archive: archiveId <span class="token operator">=</span> 9.4-1, start <span class="token operator">=</span> 000000020000000000000011, stop <span class="token operator">=</span> 000000020000000000000013
P00   INFO: expire <span class="token function">command</span> end: completed successfully
</code></pre></div><p>The <code>20180506-151702F_20180506-151718D</code> differential backup has archived WAL segments that must be retained to make the older backups consistent even though they cannot be played any further forward with PITR. WAL segments generated after <code>20180506-151702F_20180506-151718D</code> but before <code>20180506-151702F_20180506-151724D</code> are removed. WAL segments generated after the new backup <code>20180506-151702F_20180506-151724D</code> remain and can be used for PITR.</p><p>Since full backups are considered differential backups for the purpose of differential archive retention, if a full backup is now performed with the same settings, only the archive for that full backup is retained for PITR.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/pgbackrest/pgbackrest/edit/master/guide/retention.md" target="_blank" rel="noopener noreferrer">Edit this page</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/pgbackrest-docs/guide/monitoring.html" class="prev">
          Monitoring
        </a></span><span class="next"><a href="/pgbackrest-docs/guide/restore.html">
          Restore
        </a> →
      </span></p></div></div></div></div>
    <script src="/pgbackrest-docs/assets/js/46.0d093936.js" defer></script><script src="/pgbackrest-docs/assets/js/app.01ebea85.js" defer></script>
  </body>
</html>
