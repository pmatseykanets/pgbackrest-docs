<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Backup | pgBackRest</title>
    <meta name="description" content="Reliable PostgreSQL Backup &amp; Restore">
    <link rel="icon" href="/pgbackrest-docs/logo.png">
    
    <link rel="preload" href="/pgbackrest-docs/assets/css/0.styles.18edf712.css" as="style"><link rel="preload" href="/pgbackrest-docs/assets/js/app.01ebea85.js" as="script"><link rel="preload" href="/pgbackrest-docs/assets/js/33.37935b34.js" as="script"><link rel="prefetch" href="/pgbackrest-docs/assets/js/26.e11cc072.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/2.ea010887.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/3.b7507089.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/4.cfc39c6d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/5.6b11616c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/6.df92328a.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/7.58324044.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/8.c87957ea.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/9.0fb232f6.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/10.972bbafb.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/11.e78eb127.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/12.5928bd53.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/13.1c12197c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/14.d84f628c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/15.4adcb884.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/16.ef3b7049.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/17.9d3117d9.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/18.0bcae378.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/19.295fa193.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/20.94847527.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/21.b5e7b8b5.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/22.d07ad4dd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/23.77d36072.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/24.6b6691b4.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/25.f9425e67.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/27.78d9feea.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/28.1f99e16d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/29.28bb7045.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/30.cff46cbe.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/31.47660e90.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/32.9df22cac.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/34.9706bcdc.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/35.5ec6e936.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/36.996e8c9b.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/37.4718e56d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/38.b3445822.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/39.c3ad3059.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/40.567d1aff.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/41.d0b20dd8.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/42.663bd5fd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/43.d28dcd20.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/44.2dd273bd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/45.bf622f74.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/46.0d093936.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/47.4a1a0f05.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/48.808678bd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/49.18e9d1eb.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/50.fa7ae22a.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/51.63339b12.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/52.8b737e70.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/53.974f5c76.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/54.9d3ce5c2.js">
    <link rel="stylesheet" href="/pgbackrest-docs/assets/css/0.styles.18edf712.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/pgbackrest-docs/" class="home-link router-link-active"><!----><span class="site-name">
      pgBackRest
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/pgbackrest-docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/pgbackrest-docs/releases/" class="nav-link">Releases</a></div><div class="nav-item"><a href="/pgbackrest-docs/config/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/pgbackrest-docs/commands/" class="nav-link">Commands</a></div><a href="https://github.com/pgbackrest/pgbackrest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/pgbackrest-docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/pgbackrest-docs/releases/" class="nav-link">Releases</a></div><div class="nav-item"><a href="/pgbackrest-docs/config/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/pgbackrest-docs/commands/" class="nav-link">Commands</a></div><a href="https://github.com/pgbackrest/pgbackrest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span><!----></p><ul class="sidebar-group-items"><li><a href="/pgbackrest-docs/guide/" class="sidebar-link">Introduction</a></li><li><a href="/pgbackrest-docs/guide/features.html" class="sidebar-link">Features</a></li><li><a href="/pgbackrest-docs/guide/concepts.html" class="sidebar-link">Concepts</a></li><li><a href="/pgbackrest-docs/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/pgbackrest-docs/guide/quick_start.html" class="sidebar-link">Quick Start</a></li><li><a href="/pgbackrest-docs/guide/backup.html" class="active sidebar-link">Backup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/backup.html#fast-start-option" class="sidebar-link">Fast Start Option</a></li><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/backup.html#automatic-stop-option" class="sidebar-link">Automatic Stop Option</a></li><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/backup.html#archive-timeout" class="sidebar-link">Archive Timeout</a></li></ul></li><li><a href="/pgbackrest-docs/guide/monitoring.html" class="sidebar-link">Monitoring</a></li><li><a href="/pgbackrest-docs/guide/retention.html" class="sidebar-link">Retention</a></li><li><a href="/pgbackrest-docs/guide/restore.html" class="sidebar-link">Restore</a></li><li><a href="/pgbackrest-docs/guide/point_in_time_recovery.html" class="sidebar-link">Point In Time Recovery</a></li><li><a href="/pgbackrest-docs/guide/s3_support.html" class="sidebar-link">AWS S3 Support</a></li><li><a href="/pgbackrest-docs/guide/deleting_stanza.html" class="sidebar-link">Deleting a Stanza</a></li><li><a href="/pgbackrest-docs/guide/dedicated_repository_host.html" class="sidebar-link">Dedicated Repository Host</a></li><li><a href="/pgbackrest-docs/guide/parallel_backup_restore.html" class="sidebar-link">Parallel Backup / Restore</a></li><li><a href="/pgbackrest-docs/guide/starting_and_stopping.html" class="sidebar-link">Starting And Stopping</a></li><li><a href="/pgbackrest-docs/guide/replication.html" class="sidebar-link">Replication</a></li><li><a href="/pgbackrest-docs/guide/asynchronous_archiving.html" class="sidebar-link">Asynchronous Archiving</a></li><li><a href="/pgbackrest-docs/guide/backup_from_standby.html" class="sidebar-link">Backup From a Standby</a></li><li><a href="/pgbackrest-docs/guide/upgrading_postgresql.html" class="sidebar-link">Upgrading PostgreSQL</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="backup"><a href="#backup" aria-hidden="true" class="header-anchor">#</a> Backup</h1><h2 id="fast-start-option"><a href="#fast-start-option" aria-hidden="true" class="header-anchor">#</a> Fast Start Option</h2><p>By default pgBackRest will wait for the next regularly scheduled checkpoint before starting a backup. Depending on the checkpoint_timeout and checkpoint_segments settings in PostgreSQL it may be quite some time before a checkpoint completes and the backup can begin.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Incremental backup of the demo cluster with the regularly scheduled checkpoint</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr \
       --log-level-console<span class="token operator">=</span>info backup
P00   INFO: backup <span class="token function">command</span> begin 2.02: --log-level-console<span class="token operator">=</span>info --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --repo1-cipher-pass<span class="token operator">=</span> --repo1-cipher-type<span class="token operator">=</span>aes-256-cbc --repo1-path<span class="token operator">=</span>/var/lib/pgbackrest --repo1-retention-full<span class="token operator">=</span>2 --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr
P00   INFO: last backup label <span class="token operator">=</span> 20180506-151611F_20180506-151616D, version <span class="token operator">=</span> 2.02
P00   INFO: execute exclusive pg_start_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> with label <span class="token string">&quot;pgBackRest backup started at 2018-05-06 15:16:32&quot;</span><span class="token keyword">:</span> backup begins after the next regular checkpoint completes
P00   INFO: backup start archive <span class="token operator">=</span> 000000020000000000000006, lsn <span class="token operator">=</span> 0/6000028
P01   INFO: backup <span class="token function">file</span> /var/lib/postgresql/9.4/demo/pg_multixact/offsets/0000 <span class="token punctuation">(</span>8KB, 33%<span class="token punctuation">)</span> checksum 0631457264ff7f8d5fb1edc2c0211992a67c73e6
       <span class="token punctuation">[</span>filtered 10 lines of output<span class="token punctuation">]</span>
</code></pre></div><p>When <code>--start-fast</code> is passed on the command-line or start-fast=y is set in <code>/etc/pgbackrest/pgbackrest.conf</code> an immediate checkpoint is requested and the backup will start more quickly. This is convenient for testing and for ad-hoc backups. For instance, if a backup is being taken at the beginning of a release window it makes no sense to wait for a checkpoint. Since regularly scheduled backups generally only happen once per day it is unlikely that enabling the start-fast in <code>/etc/pgbackrest/pgbackrest.conf</code> will negatively affect performance, however for high-volume transactional systems you may want to pass --start-fast on the command-line instead. Alternately, it is possible to override the setting in the configuration file by passing --no-start-fast on the command-line.</p><div class="language-ini extra-class"><pre class="language-ini"><code># pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Enable the start-fast option
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>

<span class="token selector">[global]</span>
<span class="token constant">repo1-cipher-pass</span><span class="token attr-value"><span class="token punctuation">=</span>zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</span>
<span class="token constant">repo1-cipher-type</span><span class="token attr-value"><span class="token punctuation">=</span>aes-256-cbc</span>
<span class="token constant">repo1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/pgbackrest</span>
<span class="token constant">repo1-retention-full</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">start-fast</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">compress-level</span><span class="token attr-value"><span class="token punctuation">=</span>3</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Incremental backup of the demo cluster with an immediate checkpoint</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr \
       --log-level-console<span class="token operator">=</span>info backup
P00   INFO: backup <span class="token function">command</span> begin 2.02: --log-level-console<span class="token operator">=</span>info --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --repo1-cipher-pass<span class="token operator">=</span> --repo1-cipher-type<span class="token operator">=</span>aes-256-cbc --repo1-path<span class="token operator">=</span>/var/lib/pgbackrest --repo1-retention-full<span class="token operator">=</span>2 --stanza<span class="token operator">=</span>demo --start-fast --type<span class="token operator">=</span>incr
P00   INFO: last backup label <span class="token operator">=</span> 20180506-151611F_20180506-151632I, version <span class="token operator">=</span> 2.02
P00   INFO: execute exclusive pg_start_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> with label <span class="token string">&quot;pgBackRest backup started at 2018-05-06 15:16:37&quot;</span><span class="token keyword">:</span> backup begins after the requested immediate checkpoint completes
P00   INFO: backup start archive <span class="token operator">=</span> 000000020000000000000007, lsn <span class="token operator">=</span> 0/7000028
P01   INFO: backup <span class="token function">file</span> /var/lib/postgresql/9.4/demo/global/pg_control <span class="token punctuation">(</span>8KB, 97%<span class="token punctuation">)</span> checksum 8500029d8dec8b2403e77a7c8946db1e4a896834
       <span class="token punctuation">[</span>filtered 8 lines of output<span class="token punctuation">]</span>
</code></pre></div><h2 id="automatic-stop-option"><a href="#automatic-stop-option" aria-hidden="true" class="header-anchor">#</a> Automatic Stop Option</h2><p>Sometimes pgBackRest will exit unexpectedly and the backup in progress on the PostgreSQL cluster will not be properly stopped. pgBackRest exits as quickly as possible when an error occurs so that the cause can be reported accurately and is not masked by another problem that might happen during a more extensive cleanup.</p><p>Here an error is intentionally caused by removing repository permissions.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Revoke write privileges in the pgBackRest repository and attempt a backup</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> 550 /var/lib/pgbackrest/backup/demo/
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr \
       --log-level-console<span class="token operator">=</span>info backup
       <span class="token punctuation">[</span>filtered 2 lines of output<span class="token punctuation">]</span>
P00   INFO: execute exclusive pg_start_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> with label <span class="token string">&quot;pgBackRest backup started at 2018-05-06 15:16:41&quot;</span><span class="token keyword">:</span> backup begins after the requested immediate checkpoint completes
P00   INFO: backup start archive <span class="token operator">=</span> 000000020000000000000008, lsn <span class="token operator">=</span> 0/8000028
P00  ERROR: <span class="token punctuation">[</span>047<span class="token punctuation">]</span>: unable to create path <span class="token string">'/var/lib/pgbackrest/backup/demo/20180506-151611F_20180506-151641I'</span><span class="token keyword">:</span> Permission denied
P00   INFO: backup <span class="token function">command</span> end: aborted with exception <span class="token punctuation">[</span>047<span class="token punctuation">]</span>
</code></pre></div><p>Even when the permissions are fixed pgBackRest will still be unable to perform a backup because the PostgreSQL cluster is stuck in backup mode.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Restore write privileges in the pgBackRest repository and attempt a backup</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> 750 /var/lib/pgbackrest/backup/demo/
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr \
       --log-level-console<span class="token operator">=</span>info backup
P00   INFO: backup <span class="token function">command</span> begin 2.02: --log-level-console<span class="token operator">=</span>info --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --repo1-cipher-pass<span class="token operator">=</span> --repo1-cipher-type<span class="token operator">=</span>aes-256-cbc --repo1-path<span class="token operator">=</span>/var/lib/pgbackrest --repo1-retention-full<span class="token operator">=</span>2 --stanza<span class="token operator">=</span>demo --start-fast --type<span class="token operator">=</span>incr
P00   INFO: last backup label <span class="token operator">=</span> 20180506-151611F_20180506-151637I, version <span class="token operator">=</span> 2.02
P00   INFO: execute exclusive pg_start_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> with label <span class="token string">&quot;pgBackRest backup started at 2018-05-06 15:16:43&quot;</span><span class="token keyword">:</span> backup begins after the requested immediate checkpoint completes
P00  ERROR: <span class="token punctuation">[</span>057<span class="token punctuation">]</span>: ERROR:  a backup is already <span class="token keyword">in</span> progress
            HINT:  Run pg_stop_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> and try again.:
            <span class="token keyword">select</span> to_char<span class="token punctuation">(</span>current_timestamp, <span class="token string">'YYYY-MM-DD HH24:MI:SS.US TZ'</span><span class="token punctuation">)</span>, pg_xlogfile_name<span class="token punctuation">(</span>lsn<span class="token punctuation">)</span>, lsn::text from pg_start_backup<span class="token punctuation">(</span><span class="token string">'pgBackRest backup started at 2018-05-06 15:16:43'</span>, true<span class="token punctuation">)</span> as lsn
</code></pre></div><p>Enabling the <code>stop-auto</code> option allows pgBackRest to stop the current backup if it detects that no other pgBackRest backup process is running.</p><div class="language-ini extra-class"><pre class="language-ini"><code># pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Enable the stop-auto option
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>

<span class="token selector">[global]</span>
<span class="token constant">repo1-cipher-pass</span><span class="token attr-value"><span class="token punctuation">=</span>zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</span>
<span class="token constant">repo1-cipher-type</span><span class="token attr-value"><span class="token punctuation">=</span>aes-256-cbc</span>
<span class="token constant">repo1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/pgbackrest</span>
<span class="token constant">repo1-retention-full</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">start-fast</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>
<span class="token constant">stop-auto</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">compress-level</span><span class="token attr-value"><span class="token punctuation">=</span>3</span>
</code></pre></div><p>Now pgBackRest will stop the old backup and start a new one so the process completes successfully.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Perform an incremental backup</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --type<span class="token operator">=</span>incr \
       --log-level-console<span class="token operator">=</span>info backup
P00   INFO: backup <span class="token function">command</span> begin 2.02: --log-level-console<span class="token operator">=</span>info --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --repo1-cipher-pass<span class="token operator">=</span> --repo1-cipher-type<span class="token operator">=</span>aes-256-cbc --repo1-path<span class="token operator">=</span>/var/lib/pgbackrest --repo1-retention-full<span class="token operator">=</span>2 --stanza<span class="token operator">=</span>demo --start-fast --stop-auto --type<span class="token operator">=</span>incr
P00   INFO: last backup label <span class="token operator">=</span> 20180506-151611F_20180506-151637I, version <span class="token operator">=</span> 2.02
P00   WARN: the cluster is already <span class="token keyword">in</span> backup mode but no pgBackRest backup process is running. pg_stop_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> will be called so a new backup can be started.
P00   INFO: execute exclusive pg_stop_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> and <span class="token function">wait</span> <span class="token keyword">for</span> all WAL segments to archive
P00   INFO: execute exclusive pg_start_backup<span class="token punctuation">(</span><span class="token punctuation">)</span> with label <span class="token string">&quot;pgBackRest backup started at 2018-05-06 15:16:45&quot;</span><span class="token keyword">:</span> backup begins after the requested immediate checkpoint completes
P00   INFO: backup start archive <span class="token operator">=</span> 000000020000000000000009, lsn <span class="token operator">=</span> 0/9000028
P01   INFO: backup <span class="token function">file</span> /var/lib/postgresql/9.4/demo/global/pg_control <span class="token punctuation">(</span>8KB, 97%<span class="token punctuation">)</span> checksum 725279f91ec80c37072f7c1cb71fd27c36e9f0b8
       <span class="token punctuation">[</span>filtered 8 lines of output<span class="token punctuation">]</span>
</code></pre></div><p>Although useful this feature may not be appropriate when another third-party backup solution is being used to take online backups as pgBackRest will not recognize that the other software is running and may terminate a backup started by that software. However, it would be unusual to run more than one third-party backup solution at the same time so this is not likely to be a problem.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p><code>pg_dump</code> and <code>pg_basebackup</code> do not take online backups so are not affected. It is safe to run them in conjunction with pgBackRest.</p></div><h2 id="archive-timeout"><a href="#archive-timeout" aria-hidden="true" class="header-anchor">#</a> Archive Timeout</h2><p>During an online backup pgBackRest waits for WAL segments that are required for backup consistency to be archived. This wait time is governed by the pgBackRest <code>archive-timeout</code> option which defaults to 60 seconds. If archiving an individual segment is known to take longer then this option should be increased.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/pgbackrest/pgbackrest/edit/master/guide/backup.md" target="_blank" rel="noopener noreferrer">Edit this page</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/pgbackrest-docs/guide/quick_start.html" class="prev">
          Quick Start
        </a></span><span class="next"><a href="/pgbackrest-docs/guide/monitoring.html">
          Monitoring
        </a> →
      </span></p></div></div></div></div>
    <script src="/pgbackrest-docs/assets/js/33.37935b34.js" defer></script><script src="/pgbackrest-docs/assets/js/app.01ebea85.js" defer></script>
  </body>
</html>
