<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Asynchronous Archiving | pgBackRest</title>
    <meta name="description" content="Reliable PostgreSQL Backup &amp; Restore">
    <link rel="icon" href="/pgbackrest-docs/logo.png">
    
    <link rel="preload" href="/pgbackrest-docs/assets/css/0.styles.18edf712.css" as="style"><link rel="preload" href="/pgbackrest-docs/assets/js/app.01ebea85.js" as="script"><link rel="preload" href="/pgbackrest-docs/assets/js/32.9df22cac.js" as="script"><link rel="prefetch" href="/pgbackrest-docs/assets/js/26.e11cc072.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/2.ea010887.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/3.b7507089.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/4.cfc39c6d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/5.6b11616c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/6.df92328a.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/7.58324044.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/8.c87957ea.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/9.0fb232f6.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/10.972bbafb.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/11.e78eb127.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/12.5928bd53.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/13.1c12197c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/14.d84f628c.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/15.4adcb884.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/16.ef3b7049.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/17.9d3117d9.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/18.0bcae378.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/19.295fa193.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/20.94847527.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/21.b5e7b8b5.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/22.d07ad4dd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/23.77d36072.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/24.6b6691b4.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/25.f9425e67.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/27.78d9feea.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/28.1f99e16d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/29.28bb7045.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/30.cff46cbe.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/31.47660e90.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/33.37935b34.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/34.9706bcdc.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/35.5ec6e936.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/36.996e8c9b.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/37.4718e56d.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/38.b3445822.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/39.c3ad3059.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/40.567d1aff.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/41.d0b20dd8.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/42.663bd5fd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/43.d28dcd20.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/44.2dd273bd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/45.bf622f74.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/46.0d093936.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/47.4a1a0f05.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/48.808678bd.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/49.18e9d1eb.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/50.fa7ae22a.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/51.63339b12.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/52.8b737e70.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/53.974f5c76.js"><link rel="prefetch" href="/pgbackrest-docs/assets/js/54.9d3ce5c2.js">
    <link rel="stylesheet" href="/pgbackrest-docs/assets/css/0.styles.18edf712.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/pgbackrest-docs/" class="home-link router-link-active"><!----><span class="site-name">
      pgBackRest
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/pgbackrest-docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/pgbackrest-docs/releases/" class="nav-link">Releases</a></div><div class="nav-item"><a href="/pgbackrest-docs/config/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/pgbackrest-docs/commands/" class="nav-link">Commands</a></div><a href="https://github.com/pgbackrest/pgbackrest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/pgbackrest-docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/pgbackrest-docs/releases/" class="nav-link">Releases</a></div><div class="nav-item"><a href="/pgbackrest-docs/config/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/pgbackrest-docs/commands/" class="nav-link">Commands</a></div><a href="https://github.com/pgbackrest/pgbackrest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span><!----></p><ul class="sidebar-group-items"><li><a href="/pgbackrest-docs/guide/" class="sidebar-link">Introduction</a></li><li><a href="/pgbackrest-docs/guide/features.html" class="sidebar-link">Features</a></li><li><a href="/pgbackrest-docs/guide/concepts.html" class="sidebar-link">Concepts</a></li><li><a href="/pgbackrest-docs/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/pgbackrest-docs/guide/quick_start.html" class="sidebar-link">Quick Start</a></li><li><a href="/pgbackrest-docs/guide/backup.html" class="sidebar-link">Backup</a></li><li><a href="/pgbackrest-docs/guide/monitoring.html" class="sidebar-link">Monitoring</a></li><li><a href="/pgbackrest-docs/guide/retention.html" class="sidebar-link">Retention</a></li><li><a href="/pgbackrest-docs/guide/restore.html" class="sidebar-link">Restore</a></li><li><a href="/pgbackrest-docs/guide/point_in_time_recovery.html" class="sidebar-link">Point In Time Recovery</a></li><li><a href="/pgbackrest-docs/guide/s3_support.html" class="sidebar-link">AWS S3 Support</a></li><li><a href="/pgbackrest-docs/guide/deleting_stanza.html" class="sidebar-link">Deleting a Stanza</a></li><li><a href="/pgbackrest-docs/guide/dedicated_repository_host.html" class="sidebar-link">Dedicated Repository Host</a></li><li><a href="/pgbackrest-docs/guide/parallel_backup_restore.html" class="sidebar-link">Parallel Backup / Restore</a></li><li><a href="/pgbackrest-docs/guide/starting_and_stopping.html" class="sidebar-link">Starting And Stopping</a></li><li><a href="/pgbackrest-docs/guide/replication.html" class="sidebar-link">Replication</a></li><li><a href="/pgbackrest-docs/guide/asynchronous_archiving.html" class="active sidebar-link">Asynchronous Archiving</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/asynchronous_archiving.html#archive-push" class="sidebar-link">Archive Push</a></li><li class="sidebar-sub-header"><a href="/pgbackrest-docs/guide/asynchronous_archiving.html#archive-get" class="sidebar-link">Archive Get</a></li></ul></li><li><a href="/pgbackrest-docs/guide/backup_from_standby.html" class="sidebar-link">Backup From a Standby</a></li><li><a href="/pgbackrest-docs/guide/upgrading_postgresql.html" class="sidebar-link">Upgrading PostgreSQL</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="asynchronous-archiving"><a href="#asynchronous-archiving" aria-hidden="true" class="header-anchor">#</a> Asynchronous Archiving</h1><p>Asynchronous archiving is enabled with the archive-async option. This option enables asynchronous operation for both the archive-push and archive-get commands.</p><p>A spool path is required. The commands will store transient data here but each command works quite a bit differently so spool path usage is described in detail in each section.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Create the spool directory</span>
<span class="token function">sudo</span> <span class="token function">mkdir</span> -m 750 /var/spool/pgbackrest
<span class="token function">sudo</span> <span class="token function">chown</span> postgres:postgres /var/spool/pgbackrest
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-standby ⇒ Create the spool directory</span>
<span class="token function">sudo</span> <span class="token function">mkdir</span> -m 750 /var/spool/pgbackrest
<span class="token function">sudo</span> <span class="token function">chown</span> postgres:postgres /var/spool/pgbackrest
</code></pre></div><p>The spool path must be configured and asynchronous archiving enabled. Asynchronous archiving automatically confers some benefit by reducing the number of connections made to remote storage, but setting process-max can drastically improve performance by parallelizing operations. Be sure not to set <code>process-max</code> so high that it affects normal database operations.</p><div class="language-ini extra-class"><pre class="language-ini"><code># pg-primary:/etc/pgbackrest/pgbackrest.conf ⇒ Configure the spool path and asynchronous archiving
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>

<span class="token selector">[global]</span>
<span class="token constant">archive-async</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>
<span class="token constant">log-level-file</span><span class="token attr-value"><span class="token punctuation">=</span>detail</span>
<span class="token constant">repo1-host</span><span class="token attr-value"><span class="token punctuation">=</span>repository</span>
<span class="token constant">spool-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/spool/pgbackrest</span>

<span class="token selector">[global:archive-get]</span>
<span class="token constant">process-max</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">process-max</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
</code></pre></div><div class="language-ini extra-class"><pre class="language-ini"><code># pg-standby:/etc/pgbackrest/pgbackrest.conf ⇒ Configure the spool path and asynchronous archiving
<span class="token selector">[demo]</span>
<span class="token constant">pg1-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/postgresql/9.4/demo</span>
<span class="token constant">recovery-option</span><span class="token attr-value"><span class="token punctuation">=</span>standby_mode=on</span>
<span class="token constant">recovery-option</span><span class="token attr-value"><span class="token punctuation">=</span>primary_conninfo=host=172.17.0.3 port=5432 user=replicator</span>

<span class="token selector">[global]</span>
<span class="token constant">archive-async</span><span class="token attr-value"><span class="token punctuation">=</span>y</span>
<span class="token constant">log-level-file</span><span class="token attr-value"><span class="token punctuation">=</span>detail</span>
<span class="token constant">repo1-host</span><span class="token attr-value"><span class="token punctuation">=</span>repository</span>
<span class="token constant">spool-path</span><span class="token attr-value"><span class="token punctuation">=</span>/var/spool/pgbackrest</span>

<span class="token selector">[global:archive-get]</span>
<span class="token constant">process-max</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>

<span class="token selector">[global:archive-push]</span>
<span class="token constant">process-max</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
</code></pre></div><p>Note that <code>process-max</code> is configured using command sections so that the option is not used by backup and restore. This also allows different values for archive-push and archive-get.
For demonstration purposes streaming replication will be broken to force PostgreSQL to get WAL using the restore_command.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Break streaming replication by changing the replication password</span>
<span class="token function">sudo</span> -u postgres psql -c <span class="token string">&quot;alter user replicator password 'bogus'&quot;</span>
ALTER ROLE
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-standby ⇒ Restart standby to break connection</span>
<span class="token function">sudo</span> pg_ctlcluster 9.4 demo restart
</code></pre></div><h2 id="archive-push"><a href="#archive-push" aria-hidden="true" class="header-anchor">#</a> Archive Push</h2><p>The asynchronous archive-push command offloads WAL archiving to a separate process (or processes) to improve throughput. It works by looking ahead to see which WAL segments are ready to be archived beyond the request that PostgreSQL is currently making via the archive_command. WAL segments are transferred to the archive directly from the <code>pg_xlog/pg_wal</code> directory and success is only returned by the archive_command when the WAL segment has been safely stored in the archive.</p><p>The spool path holds the current status of WAL archiving. Status files written into the spool directory are typically zero length and should consume a minimal amount of space (a few MB at most) and very little IO. All the information in this directory can be recreated so it is not necessary to preserve the spool directory if the cluster is moved to new hardware.</p><div class="tip custom-block"><p class="custom-block-title">NOTE:</p><p>In the original implementation of asynchronous archiving, WAL segments were copied to the spool directory before compression and transfer. The new implementation copies WAL directly from the <code>pg_xlog</code> directory. If asynchronous archiving was utilized in v1.12 or prior, read the v1.13 release notes carefully before upgrading.</p></div><p>The <code>[stanza]-archive-push-async.log</code> file can be used to monitor the activity of the asynchronous process. A good way to test this is to quickly push a number of WAL segments.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Test parallel asynchronous archiving</span>
<span class="token function">sudo</span> -u postgres psql -c <span class="token string">&quot; \
       select pg_create_restore_point('test async push'); select pg_switch_xlog(); \
       select pg_create_restore_point('test async push'); select pg_switch_xlog(); \
       select pg_create_restore_point('test async push'); select pg_switch_xlog(); \
       select pg_create_restore_point('test async push'); select pg_switch_xlog(); \
       select pg_create_restore_point('test async push'); select pg_switch_xlog();&quot;</span>
<span class="token function">sudo</span> -u postgres pgbackrest --stanza<span class="token operator">=</span>demo --log-level-console<span class="token operator">=</span>info check
P00   INFO: check <span class="token function">command</span> begin 2.02: --log-level-console<span class="token operator">=</span>info --log-level-file<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --repo1-host<span class="token operator">=</span>repository --stanza<span class="token operator">=</span>demo
P00   INFO: WAL segment 00000008000000000000002A successfully stored <span class="token keyword">in</span> the archive at <span class="token string">'/var/lib/pgbackrest/archive/demo/9.4-1/0000000800000000/00000008000000000000002A-2b54769baadaec580e9b8814868ced3aeef7d951.gz'</span>
P00   INFO: check <span class="token function">command</span> end: completed successfully
</code></pre></div><p>Now the log file will contain parallel, asynchronous activity.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Check results in the log</span>
<span class="token function">sudo</span> -u postgres <span class="token function">cat</span> /var/log/pgbackrest/demo-archive-push-async.log
-------------------PROCESS START-------------------
P00   INFO: archive-push <span class="token function">command</span> begin 2.02: <span class="token punctuation">[</span>pg_xlog/000000080000000000000025<span class="token punctuation">]</span> --archive-async --log-level-console<span class="token operator">=</span>off --log-level-file<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --process-max<span class="token operator">=</span>2 --repo1-host<span class="token operator">=</span>repository --spool-path<span class="token operator">=</span>/var/spool/pgbackrest --stanza<span class="token operator">=</span>demo
P00   INFO: push 2 WAL file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> to archive: 000000080000000000000025<span class="token punctuation">..</span>.000000080000000000000026
P01 DETAIL: pushed WAL <span class="token function">file</span> 000000080000000000000025 to archive
P02 DETAIL: pushed WAL <span class="token function">file</span> 000000080000000000000026 to archive
P00   INFO: archive-push <span class="token function">command</span> end: completed successfully

-------------------PROCESS START-------------------
P00   INFO: archive-push <span class="token function">command</span> begin 2.02: <span class="token punctuation">[</span>pg_xlog/000000080000000000000027<span class="token punctuation">]</span> --archive-async --log-level-console<span class="token operator">=</span>off --log-level-file<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --process-max<span class="token operator">=</span>2 --repo1-host<span class="token operator">=</span>repository --spool-path<span class="token operator">=</span>/var/spool/pgbackrest --stanza<span class="token operator">=</span>demo
P00   INFO: push 3 WAL file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> to archive: 000000080000000000000027<span class="token punctuation">..</span>.000000080000000000000029
P01 DETAIL: pushed WAL <span class="token function">file</span> 000000080000000000000027 to archive
P02 DETAIL: pushed WAL <span class="token function">file</span> 000000080000000000000028 to archive
P01 DETAIL: pushed WAL <span class="token function">file</span> 000000080000000000000029 to archive
P00   INFO: archive-push <span class="token function">command</span> end: completed successfully

-------------------PROCESS START-------------------
P00   INFO: archive-push <span class="token function">command</span> begin 2.02: <span class="token punctuation">[</span>pg_xlog/00000008000000000000002A<span class="token punctuation">]</span> --archive-async --log-level-console<span class="token operator">=</span>off --log-level-file<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --process-max<span class="token operator">=</span>2 --repo1-host<span class="token operator">=</span>repository --spool-path<span class="token operator">=</span>/var/spool/pgbackrest --stanza<span class="token operator">=</span>demo
P00   INFO: push 1 WAL file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> to archive: 00000008000000000000002A
P01 DETAIL: pushed WAL <span class="token function">file</span> 00000008000000000000002A to archive
P00   INFO: archive-push <span class="token function">command</span> end: completed successfully
</code></pre></div><h2 id="archive-get"><a href="#archive-get" aria-hidden="true" class="header-anchor">#</a> Archive Get</h2><p>The asynchronous archive-get command maintains a local queue of WAL to improve throughput. If a WAL segment is not found in the queue it is fetched from the repository along with enough consecutive WAL to fill the queue. The maximum size of the queue is defined by archive-get-queue-max. Whenever the queue is less than half full more WAL will be fetched to fill it.</p><p>Asynchronous operation is most useful in environments that generate a lot of WAL or have a high latency connection to the repository storage (i.e., S3). In the case of a high latency connection it may be a good idea to increase <code>process-max</code>.
The <code>[stanza]-archive-get-async.log</code> file can be used to monitor the activity of the asynchronous process.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-standby ⇒ Check results in the log</span>
<span class="token function">sudo</span> -u postgres <span class="token function">cat</span> /var/log/pgbackrest/demo-archive-get-async.log
-------------------PROCESS START-------------------
P00   INFO: archive-get <span class="token function">command</span> begin 2.02: <span class="token punctuation">[</span>000000080000000000000023, 000000080000000000000024, 000000080000000000000025, 000000080000000000000026, 000000080000000000000027, 000000080000000000000028, 000000080000000000000029, 00000008000000000000002A<span class="token punctuation">]</span> --archive-async --log-level-console<span class="token operator">=</span>off --log-level-file<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --process-max<span class="token operator">=</span>2 --repo1-host<span class="token operator">=</span>repository --spool-path<span class="token operator">=</span>/var/spool/pgbackrest --stanza<span class="token operator">=</span>demo
P00   INFO: get 8 WAL file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> from archive: 000000080000000000000023<span class="token punctuation">..</span>.00000008000000000000002A
P01 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000023 from archive
P02 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000024 from archive
P01 DETAIL: WAL <span class="token function">file</span> 000000080000000000000025 not found <span class="token keyword">in</span> archive
P02 DETAIL: WAL <span class="token function">file</span> 000000080000000000000026 not found <span class="token keyword">in</span> archive
       <span class="token punctuation">[</span>filtered 33 lines of output<span class="token punctuation">]</span>
P00   INFO: archive-get <span class="token function">command</span> begin 2.02: <span class="token punctuation">[</span>000000080000000000000025, 000000080000000000000026, 000000080000000000000027, 000000080000000000000028, 000000080000000000000029, 00000008000000000000002A, 00000008000000000000002B, 00000008000000000000002C<span class="token punctuation">]</span> --archive-async --log-level-console<span class="token operator">=</span>off --log-level-file<span class="token operator">=</span>detail --log-level-stderr<span class="token operator">=</span>off --no-log-timestamp --pg1-path<span class="token operator">=</span>/var/lib/postgresql/9.4/demo --process-max<span class="token operator">=</span>2 --repo1-host<span class="token operator">=</span>repository --spool-path<span class="token operator">=</span>/var/spool/pgbackrest --stanza<span class="token operator">=</span>demo
P00   INFO: get 8 WAL file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> from archive: 000000080000000000000025<span class="token punctuation">..</span>.00000008000000000000002C
P01 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000025 from archive
P02 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000026 from archive
P01 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000027 from archive
P02 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000028 from archive
P02 DETAIL: WAL <span class="token function">file</span> 00000008000000000000002A not found <span class="token keyword">in</span> archive
P02 DETAIL: WAL <span class="token function">file</span> 00000008000000000000002B not found <span class="token keyword">in</span> archive
P02 DETAIL: WAL <span class="token function">file</span> 00000008000000000000002C not found <span class="token keyword">in</span> archive
P01 DETAIL: got WAL <span class="token function">file</span> 000000080000000000000029 from archive
P00   INFO: archive-get <span class="token function">command</span> end: completed successfully

       <span class="token punctuation">[</span>filtered 5 lines of output<span class="token punctuation">]</span>
P02 DETAIL: WAL <span class="token function">file</span> 00000008000000000000002D not found <span class="token keyword">in</span> archive
P02 DETAIL: WAL <span class="token function">file</span> 00000008000000000000002E not found <span class="token keyword">in</span> archive
P01 DETAIL: got WAL <span class="token function">file</span> 00000008000000000000002A from archive
P00   INFO: archive-get <span class="token function">command</span> end: completed successfully

       <span class="token punctuation">[</span>filtered 24 lines of output<span class="token punctuation">]</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pg-primary ⇒ Fix streaming replication by changing the replication password</span>
<span class="token function">sudo</span> -u postgres psql -c <span class="token string">&quot;alter user replicator password 'jw8s0F4'&quot;</span>
ALTER ROLE
</code></pre></div></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/pgbackrest/pgbackrest/edit/master/guide/asynchronous_archiving.md" target="_blank" rel="noopener noreferrer">Edit this page</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/pgbackrest-docs/guide/replication.html" class="prev">
          Replication
        </a></span><span class="next"><a href="/pgbackrest-docs/guide/backup_from_standby.html">
          Backup From a Standby
        </a> →
      </span></p></div></div></div></div>
    <script src="/pgbackrest-docs/assets/js/32.9df22cac.js" defer></script><script src="/pgbackrest-docs/assets/js/app.01ebea85.js" defer></script>
  </body>
</html>
